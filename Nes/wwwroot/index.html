<!DOCTYPE html>
<html>
<head>
    <title></title>
	<meta charset="utf-8" />
</head>
<body>
<button id="btnTest">Test</button>
<div id="log"></div>

<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="js/app.js"></script>
<script language="javascript">

	function log(st) {
		$('#log').html($('#log').html() + st + '<br />');
	}
	$('#btnTest').click(() => {
		var xhr = new XMLHttpRequest();
		xhr.open('GET', 'nestest.bin', true);
		xhr.responseType = 'arraybuffer';
		xhr.onload = function (e) {
			if (this.status === 200) {
				$.get('nestest.log').done(lines => {
					var blob = new Uint8Array(this.response);
					var nesEmulator = new NesEmulator(new NesImage(blob));
					new StepTest().run(nesEmulator, lines, function(st) { log(st) });
				});
			}
		}
		xhr.send();
	});

</script>
</body>
</html>
